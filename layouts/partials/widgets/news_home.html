{{ $ := .root }}
{{ $page := .page }}

{{ $news_page_path := (printf "/news") }}
{{ $news_page := site.GetPage $news_page_path }}
{{ if not $news_page }}
  {{ errorf "Could not find an author page at `%s`. Please check the value of `news` in your About widget and create an associated author page if one does not already exist. See https://sourcethemes.com/academic/docs/page-builder/#about " $news_page_path }}
{{end}}
{{ $news := $news_page.Params }}

<!-- News widget -->
<div class="margin-auto">
  <div class="center-text section-heading">
    <h1>{{ with $page.Title }}{{ . | markdownify }}{{ end }}</h1>
    {{ with $page.Params.subtitle }}<p>{{ . | markdownify }}</p>{{ end }}
  </div>
  
  <div class="col-md-12">
    {{ with $page.Content }}{{ . }}{{ end }}

    {{ if $news.news }}
    {{ $exp_len := len $news.news }}
    {{ range $idx, $key := sort $news.news ".year" "desc" }}
    <div class="row experience">

      <!-- Content -->
      <div class="col py-2">
        <div class="card">
          <div class="card-body">
            <h4 class="card-title exp-title text-muted mt-0 mb-1">{{.year | markdownify | emojify}}</h4>

            {{with .description}}<div class="card-text">{{. | markdownify | emojify}}</div>{{end}}
			
			{{ $archive_text := default "See all" }}
			
      <a href="/news">
        Click Here to See More News
        <i class="fas fa-angle-right"></i>
      </a>
			
          </div>
        </div>
      </div>
    </div>
	
    {{end}}
	
    {{end}}
	
  </div>
</div>